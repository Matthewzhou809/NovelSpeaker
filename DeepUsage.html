<!DOCTYPE html>
<html>
  <head>
    <title>ことせかい のディープな使い方</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120516028-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-120516028-2');
    </script>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <section id="main_content">
<h1>見るだけでは発見しづらい機能の解説</h1>
<hr />
<h3>目次</h3>
<ul>
        <li><a href="#Introduction">はじめに</a></li>
	<li><a href="#WebImport">SafariからのWeb取込</a></li>
	<li><a href="#ImportTextDocument">テキストファイル等の取り込み(ことせかい へコピー)</a></li>
	<li><a href="#PullUpdateOnBookshelf">本棚の「ひっぱって更新」</a></li>
	<li><a href="#SwipeInTheText">本文表示部での左右のスワイプ</a></li>
	<li><a href="#RemoteControlFromEarphone">イヤホンについたリモコンからの操作</a></li>
	<li><a href="#ControlCenterOperation">コントロールセンターでの再生中の再生位置変更</a></li>
	<li><a href="#SpeechModTips">読み替え辞書登録Tips</a></li>
</ul>

<hr />
<h3 id="Introduction">はじめに</h3>
<p>ことせかい の機能は、見れば発見できるように作ろうとしている(長押しや画面外からのスワイプなどの見えていない何かを使うようなものは極力避けたUIを実装しようとしている)のですが、それでもうまくはわからない機能がいくつか存在してしまっています。このページではそれら気づかれにくい機能について解説することで、それらの機能が忘れ去られないようにしようかと思います。
</p>
<p>なお、このリストは開発者がテキトーに思いつくままに書いているため、全ての発見しづらい機能を網羅しているわけではありません。ですので、何か抜けている物があったり、これは開発者も気づいていないのではなかろうかと思ったりした「便利な使い方」などありましたら、お問い合わせフォーム等からこっそり教えて頂けると嬉しいです。
</p>

<hr /><h3 id="WebImport">SafariからのWeb取込</h3>
<p>ことせかい では Web取込 タブから小説を取り込む事ができますが、この Web取込 タブに登録されていないWebサイト様についても小説を取り込む事ができる事があります。
そのようなWebサイト様を一つひとつ Web取込 タブ側でなんとかして表示してブックマークに追加するというのも良いとは思うのですが、Web取込 タブのブラウザはいまいち使い勝手がよろしくありませんので、特に初期から登録されていないWebサイト様については Safari を使った方が楽だという時もあります。
そのような時にはこの Safari からの Web取込 の機能が便利に利用できるかと思います。
この Safari からの Web取込 の方法については、Web取込の解説ページの<a href="./WebImport.html#ImportFromSafari">Safari からの取込</a>に詳しく書かれておりますのでそちらをご参照ください。
</p>

<hr /><h3 id="ImportTextDocument">テキストファイル等の取り込み(ことせかい へコピー)</h3>
<p>ことせかい はテキストファイルやリッチテキスト、PDFといった文書ファイルについて、その文書ファイルの中の文字列を取り込む機能があります。これは、iOS のシェア機能を使って実装されています。
例えば、メールに添付されたテキストファイルやDropbox等のオンラインストレージサービス等に保存されたファイルを読み込む場合、それらのファイルをシェアボタン(四角から上向きの矢印が出ているアイコン)を使ってシェアされる先として、「ことせかいへコピー」が出る場合にはそのファイルの中身をテキストファイルとして本棚に登録することができます。
</p>
<p>なお、初期状態ではシェアボタンで出てくるメニューに「ことせかいへコピー」が出てこないかもしれません。その場合はシェアボタンを押した時に出てくるリストのうち、カラーのアイコンの部分の一番右側にある「その他」を選択した時に出てくる「ことせかいへコピー」をONにしますと、シェアボタンからの「ことせかいへコピー」の機能が使えるようになると思います。
</p>
<p>なお、2019年2月現在、このようなシェアボタンを経由して ことせかい へと取り込む事ができるファイルは以下の拡張子のものになります。
<ul>
	<li>.txt</li>
	<li>.rtf, rtfd</li>
	<li>.pdf</li>
</ul>
</p>

<hr /><h3 id="PullUpdateOnBookshelf">本棚の「ひっぱって更新」</h3>
<p>ことせかい では、小説が更新された場合にその新しく追加された章を読み込む機能がございます。
本棚を表示している時に右上にあります回転している矢印のアイコンをタップすることで全ての小説について更新の確認を行う事ができますが、小説のリストを一番上までスクロールして、そこからさらに下に向けてリストを引っ張る事でも、全ての小説についての更新の確認を行わせる事ができます。
右上の回転している矢印アイコンをタップするのが面倒くさい場合には少しだけ便利かもしれません。
</p>

<hr /><h3 id="SwipeInTheText">本文表示部での左右のスワイプ</h3>
<p>小説の本文を表示している時に、画面下部の「＜」と「＞」というアイコンをタップする事で前後の章へと移動できます。
ただ、この「＜」と「＞」を押すのが面倒くさいという場合には、本文部分を左右にスワイプすることでも、同様に前後の章へと移動することができるようになっています。
どちらか使いやすい方を使って頂ければと思います。
</p>

<hr /><h3 id="RemoteControlFromEarphone">イヤホンについたリモコンからの操作</h3>
<p>ことせかい はイヤホンからのリモートコントロールに対応しています。
イヤホンの種類によって操作が異なってしまいますのでこの操作でこうなる、という事を正確に言い表す事はできないのですが、例えばイヤホンジャックのついた iPhone に付属していたイヤホンについているリモコンからの操作ですと、以下のような事ができるようになっています。
<ul>
	<li>再生・停止：真ん中ボタンを一回押す</li>
	<li>次の章：真ん中ボタンを二回素早く押す</li>
	<li>前の章：真ん中ボタンを三回素早く押す</li>
	<li>早送り：真ん中ボタンを二回素早く押し、二回目は押しっぱなし</li>
	<li>巻き戻し：真ん中ボタンを三回素早く押し、三回目は押しっぱなし</li>
</ul>
</p>

<hr /><h3 id="ControlCenterOperation">コントロールセンターでの再生中の再生位置変更</h3>
<p>設定 → 「他のアプリで音楽が鳴っても止まらないように努力する〜」 がONになっていない場合には、読み上げ中にコントロールセンター(画面外の上か下からスワイプすると出てくるアレ)からの制御が可能です。標準状態では再生の停止や前後の章への移動が可能です。
</p>
<p>設定 → 「コントロールセンターでの前の章や次の章へのボタンを少し巻き戻し・少し進めるボタンへ変更する」をONにしますと、前後の章への移動はできなくなりますが、ちょっと聞き取りにくかったのでもう一度、といった時に便利な少し巻き戻しという操作ができるようになります。
</p>
<p>設定 → 「コントロールセンターに再生時間を表示する〜」をONにしますと、コントロールセンター上で現在読み上げている章のおおよその読み上げ時間が表示されるようになり、同時に表示される再生位置のゲージをつまんで動かすことで、再生位置を(大雑把ですが)移動させる事ができるようになります。
</p>

<hr /><h3 id="SpeechModTips">読み替え辞書登録Tips</h3>
<p>ことせかい での読み上げ(正確にはAVSpeechSynthesizerでの読み上げ)は、その「ことせかい」という名前の由来にもありますように、思いの外多くの読み間違いが起こります。この読み間違いを修正するために、設定 → 「読みの修正」という機能があるのですが、この読み替えを行わせるときの登録方法のヒントを書き下しておきますので参考にしてください。
</p>
<p>読み替え辞書が本文へと適用される時には、読み替え元の文字数が長い方が優先されます。例えば、「宇宙世紀」から「うちゅうせいき」への読み替えと、「宇宙」から「そら」への読み替えの二つが登録されている時に、「宇宙世紀0079」は「うちゅうせいき0079」へと読み替えられますが、「宇宙に移民」は「そらに移民」へと読み替えられます。
</p>
<p>読み替えは、読み上げに使われる文字列として読み替え先の文字に置き換わったものが使われる、という事を意識すると良いです。
これは、読み替えた文字列が前後の文字列と合わさる事で別の単語に変化してしまうのに気をつけると言い換えても良いかもしれません。
例えば「地雷」を「じらい」と読み替える設定があった場合に、「地雷原」は「じらい原」と読み替えられてしまい、発音としては「じらいはら」となってしまう場合があるかもしれない、という事を考えておいたほうが良いという事です。
この例の場合は「地雷」を「じらい」と登録した場合は「地雷原」を「じらいげん」と読み替えるものも別途登録しておいたほうが無難だと思われます。
</p>
<p>単語の読み替えは ひらがな よりカタカナへ読み替えさせた方が良い事が多いです。
これは、文章中にはカタカナよりも ひらがな の方がよく出てくるため、ひらがな への読み替えを登録していると、前後のひらがなにくっついて別の単語として認識されて読み上げ方が違うように読み上げられてしまう可能性が高まる事を気をつけているという物です。
読み替え先をカタカナにすることでカタカナ部分が別の単語として認識されやすくなるため、前後の ひらがな とくっついて別の単語として認識される可能性を減らせます。
もちろん、単語ではない部分についてはカタカナにせずに ひらがな のままの方が良い場合の方が多いので、単純にカタカナにすれば良いというわけではありません。
</p>
<p>「は」を「わ」と読み上げさせないようにするには、「歯」に読み替えさせるという手段がないこともありません。
ただ、「歯」が前後の文字列とくっついてしまって別の単語として認識されてしまうことで読みがおかしなことになる場合がありそうです。
この場合に「_歯_」といった形で前後に「_」をくっつけることで強制的に前後の文字とはくっつけずに認識させることができるようです。
ただ、このテクニックは iOS のアップデートで AVSpeechSynthesizer が更新されることで上手く動かなくなる可能性があるため、標準の辞書では使っておりません。ご利用の際は将来的におかしな動作になるかもしれないという事を理解した上でご利用下さい。
</p>
<p>しばらく前から読み替え辞書の登録時には正規表現での登録ができるようになりました。正規表現での読み替えには <a href="https://developer.apple.com/documentation/foundation/nsregularexpression">NSRegularExpression</a> を使っておりますので <a href="https://developer.apple.com/documentation/foundation/nsregularexpression#1661082">NSRegularExpression で利用できるオペレータ</a> のほとんどが利用可能です。また、読み替え先の文字列に <code>$1</code> や <code>$2</code> といった <a href="https://developer.apple.com/documentation/foundation/nsregularexpression#1661112">Template Matching Format</a> を利用することもできます。
</p>
<p>正規表現での読み替え指定がされている場合、読み上げを行う文章全体に対して正規表現マッチを行い、マッチした場合には「マッチした部分」から「読み替え先」への読み替え辞書を一時的に登録する、という事を行っています。そのため、読み替えで似た文字列があった場合は一番長い読み替え元の物が採用されるというルールで適用される「読み替え元」は正規表現でマッチした後のマッチした部分になるため、場合によっては推測しにくい挙動になることがありえますのでご注意下さい。
</p>
	</section>
        <footer>
	  <a href="./">Top</a><br>
          ことせかい is maintained by <a href="https://github.com/limura">limura</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
      </div>
    </div>
  </body>
</html>
